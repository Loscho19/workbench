{% extends "base.html" %}

{% load history i18n workbench %}

{% block title %}{% trans 'monthly invoicing' %} - {{ block.super }}{% endblock %}

{% block content %}
<div class="row">
<div class="col-sm-12">
  <h1>{% trans 'monthly invoicing' %}</h1>

  <table class="table table-sm table-responsive-lg">
    <tr>
      <th>{% trans 'invoice' %}</th>
      <th class="text-right">{% trans 'total' %}</th>
      <th class="text-right">{% trans 'total excl. tax' %}</th>
      <th class="text-right">{% trans 'third party costs' %}</th>
    </tr>
    <tr>
      <th>{{ view.year }}</th>
      <th class="text-right">{{ monthly_invoicing.total|currency }}</th>
      <th class="text-right">{{ monthly_invoicing.total_excl_tax|currency }}</th>
      <th class="text-right">{{ monthly_invoicing.third_party_costs|currency }}</th>
    </tr>
    {% for month in monthly_invoicing.months %}
      <tr>
        <th>{{ month.month|date:'F' }}</th>
        <th class="text-right">{{ month.total|currency }}</th>
        <th class="text-right">{{ month.total_excl_tax|currency }}</th>
        <th class="text-right">{{ month.third_party_costs|currency }}</th>
      </tr>
      {% for invoice in month.invoices %}
        <tr>
          <td>
            <a href="{{ invoice.get_absolute_url }}">
              {{ invoice }}
              <span class="badge badge-{{ invoice.status_css }}">{{ invoice.pretty_status }}</span>
            </a>
          </td>
          <td class="text-right">{{ invoice.total|currency }}</td>
          <td class="text-right">{{ invoice.total_excl_tax|currency }}</td>
          <td></td>
        </tr>
      {% endfor %}
    {% endfor %}
  </table>

    {{ monthly_invoicing }}
</div>
</div>
{% endblock %}
