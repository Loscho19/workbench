{% extends "base.html" %}

{% load history i18n workbench %}

{% block title %}{{ object }} - {{ view.meta.verbose_name_plural }} - {{ block.super }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
<div class="col-md-10 col-lg-8">
  <h1>{{ object|h }} {% history_link object %}</h1>

  <table class="table table-striped">
    <tr>
      <th class="text-right">{% trans 'customer' %}</th>
      <td>{% link_or_none object.customer %}</td>
    </tr>
    <tr>
      <th class="text-right">{% trans 'contact' %}</th>
      <td>{% link_or_none object.contact %}</td>
    </tr>
    <tr>
      <th class="text-right">{% trans 'project' %}</th>
      <td>{% link_or_none object.project %}</td>
    </tr>
    <tr>
      <th class="text-right">{% trans 'status' %}</th>
      <td>
        <span class="badge badge-{{ object.status_css }}">{{ object.pretty_status }}</span>
        {{ object.payment_notice|linebreaksbr }}
      </td>
    </tr>
    <tr>
      <th class="text-right">{% trans 'description' %}</th>
      <td>{{ object.description|linebreaksbr|default:"&ndash;" }}</td>
    </tr>
    <tr>
      <th class="text-right">{% trans 'postal address' %}</th>
      <td>{{ object.postal_address|linebreaksbr|default:"&ndash;" }}</td>
    </tr>
    <tr>
      <th class="text-right">{% trans 'subtotal' %}</th>
      <td>{{ object.subtotal|currency }}</td>
    </tr>
    {% if object.discount %}
      <tr>
        <th class="text-right">{% trans 'discount' %}</th>
        <td>-{{ object.discount|currency }}</td>
      </tr>
    {% endif %}
    {% if object.down_payment_total %}
      <tr>
        <th class="text-right">{% trans 'down payment total' %}</th>
        <td>-{{ object.down_payment_total|currency }}</td>
      </tr>
    {% endif %}
    {% if object.liable_to_vat and object.subtotal != object.total_excl_tax %}
      <tr>
        <th class="text-right">{% trans 'total excl. tax' %}</th>
        <td>{{ object.total_excl_tax|currency }}</td>
      </tr>
    {% endif %}
    <tr>
      <th class="text-right">{{ object.total_title }}</th>
      <td>{{ object.total|currency }}</td>
    </tr>
  </table>

  <a href="{{ object.urls.pdf }}" class="btn btn-secondary" target="_blank">
    PDF
  </a>
  <a href="{{ object.urls.update }}" class="btn btn-secondary">
    {% trans 'Update' %}
  </a>
  <a href="{{ object.urls.create }}?copy_invoice={{ object.pk }}" class="btn btn-secondary">
    {% trans 'Copy' %}
  </a>
  <a href="{{ object.urls.delete }}" class="btn btn-outline-danger float-right">
    {% trans 'Delete' %}
  </a>
</div>
</div>
{% endblock %}
