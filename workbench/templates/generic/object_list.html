{% extends "base.html" %}

{% load fineforms i18n workbench %}

{% block title %}{{ view.meta.verbose_name_plural|capfirst }} - {{ block.super }}{% endblock %}

{% block content %}
<div class="row">
  <div class="col-sm-12">

    <div class="d-flex flex-column flex-lg-row align-items-lg-center justify-content-lg-between">
      <h1><a class="text-reset text-decoration-none" href="{{ view.model.urls.list }}">{{ view.meta.verbose_name_plural|capfirst }}</a></h1>
      <form method="GET" action="." class="form-inline form-search mb-3 mb-lg-0" data-autosubmit>
        {% if view.search_form %}
          <label class="sr-only">{% trans 'search' %}</label>
          <input
            class="form-control"
            type="search"
            name="q"
            placeholder="{% trans 'search' %}"
            value="{{ view.request.GET.q|default:'' }}">
        {% endif %}

        {% for f in view.search_form %}
          {% ff_field f %}
        {% endfor %}

        {% block search-form-buttons %}
        {% if view.show_create_button %}
          <a href="{{ view.model.urls.create }}" class="btn btn-secondary">
            {% include "svg/plus.svg" %}
            {{ view.meta.verbose_name }}
          </a>
        {% endif %}
        {% endblock %}
      </form>
    </div>

    {% block objects %}
    {% for object in object_list %}
    <a href="{{ object.get_absolute_url }}" class="list-group-item list-group-item-action">
      <span style="float:right" class="badge badge-{{ object.status_css }}">{{ object.pretty_status }}</span>
      <h5 class="mb-0">{{ object|h }}</h5>
    </a>
    {% endfor %}
    {% endblock %}

    <nav class="mt-3">
      <ul class="pagination align-items-center">
        {% if page_obj.has_previous %}<li class="page-item"><a class="page-link" href="{% querystring page=page_obj.previous_page_number %}">&laquo;</a></li>
        {% else %}<li class="page-item disabled"><span class="page-link">&laquo;</span></li>
        {% endif %}

        {% if page_obj.has_next %}<li class="page-item"><a class="page-link" href="{% querystring page=page_obj.next_page_number %}">&raquo;</a></li>
        {% else %}<li class="page-item disabled"><span class="page-link">&raquo;</span></li>
        {% endif %}

        <li class="pl-3">
          {{ page_obj.start_index }} &ndash; {{ page_obj.end_index }} {% trans 'of' %} {{ page_obj.paginator.count }}
        </li>
      </ul>
    </nav>
  </div>
</div>
{% endblock %}
