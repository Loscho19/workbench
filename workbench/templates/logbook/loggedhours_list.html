{% extends "generic/object_list.html" %}

{% load bootstrap4 i18n querystring workbench %}

{% block objects %}
<div class="list-group list-group-flush">
{% for day, sum, instances in object_list|select_related:'service__project__owned_by,rendered_by'|group_hours_by_day %}
<h5 class="mt-3 mb-3 d-flex justify-content-between">
  <span>{{ day|date:'d.m.Y' }}</span>
  <span class="text-right">{{ sum }}h</span>
</h5>
{% for hours in instances %}
<a class="list-group-item list-group-item-action px-0" href="{{ hours.get_absolute_url }}" data-toggle="ajaxmodal">
  <small class="d-flex justify-content-between">
    <span>{{ hours.service.project }}: {{ hours.service }}</span>
    <span>{{ hours.rendered_by.get_short_name }} / {{ hours.created_at|date:'H:i' }}</span>
  </small>
  <p class="mb-0"><strong>{{ hours.hours }}h</strong> {{ hours.description }}</p>
</a>
{% endfor %}
{% endfor %}
</div>

<p>
  {{ paginator.count }} {{ view.meta.verbose_name_plural }}
  {% if view.root_queryset_count != paginator.count %}
  (<a href=".">{% blocktrans with total=view.root_queryset_count %}{{ total }} total{% endblocktrans %}</a>)
  {% endif %}
</p>
{% endblock %}
